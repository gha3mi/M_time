#@(#) Makefile started by makeout(1) 2019-12-13 15:27:55
# generated by:   ...

NULL=
PROGFILES = \
   ../demo/box_month.f90 \
   ../demo/d2j.f90 \
   ../demo/d2o.f90 \
   ../demo/d2u.f90 \
   ../demo/d2w.f90 \
   ../demo/date_to_julian.f90 \
   ../demo/date_to_unix.f90 \
   ../demo/days2sec.f90 \
   ../demo/dow.f90 \
   ../demo/easter.f90 \
   ../demo/fmtdate.f90 \
   ../demo/fmtdate_usage.f90 \
   ../demo/guessdate.f90 \
   ../demo/j2d.f90 \
   ../demo/julian_to_date.f90 \
   ../demo/mo2d.f90 \
   ../demo/mo2v.f90 \
   ../demo/moon_fullness.f90 \
   ../demo/now.f90 \
   ../demo/o2d.f90 \
   ../demo/ordinal_seconds.f90 \
   ../demo/ordinal_to_date.f90 \
   ../demo/phase_of_moon.f90 \
   ../demo/sec2days.f90 \
   ../demo/u2d.f90 \
   ../demo/unix_to_date.f90  \
   ../demo/v2mo.f90  \
   ../demo/w2d.f90 \
   $(NULL)

TESTFILES = ../test/test_suite_M_time.f90
TEST = ${TESTFILES:.f90=}

CPROGFILES = 

PROG = ${PROGFILES:.f90=}

CPROG = ${CPROGFILES:.c=}

SRCS =  M_time.f90 M_time_oop.f90 M_time_duplicate.f90

OBJS =  M_time.o M_time_oop.o M_time_duplicate.o
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
# platform-specific values you will probably change
# 
LIBS := 
CC := cc
CFLAGS := -O
FC := gfortran
FFLAGS := -O
F90 := gfortran
F90FLAGS := -O
LDFLAGS := 
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
all: $(PROG) $(CPROG)
	@echo "That's all folks!"

$(PROG): $(OBJS)

	-$(F90) $(LDFLAGS) $@.f90 -o $@ $(OBJS) $(LIBS) # ||echo "ouch: $@.f90"

.PHONY: help
help:
	: make    '-- build M_time module'
	: run     '-- run manpage demo programs and test program'
	: test    '-- run test program (requires additional modules)'
	: man     '-- show all manpages as text'
	: clean   '-- clean directory of object files and executables'
	: doxygen '-- run doxygen(1) if you have it'
	: help    '-- display this text'

.PHONY: run
run: $(PROG)
	# run everything
	echo $? |xargs -n 1|xargs -iXX time XX

.PHONY: test
test: $(OBJS)
	# compile and load
	$(F90) $(LDFLAGS) $(TESTFILES) -o ${TESTFILES:.f90=} $(OBJS) $(LIBS)
	# run 
	${TESTFILES:.f90=}

.PHONY: doxygen
doxygen: 
	doxygen dox.in

.PHONY: clean
clean:
	rm -f $(PROG) $(CPROG) $(OBJS) *.mod $(TEST)

.PHONY: man
man:
	@mandb ../man 1>&2
	@env MANPATH=../man MANWIDTH=256 man -k .|col -b
	@env MANPATH=../man MANWIDTH=80  man --regex '.*'|col -b

.SUFFIXES: $(SUFFIXES) .f90 .F90

.f90.o:
	$(F90) $(F90FLAGS) -c $<

.F90.o:
	$(F90) $(F90FLAGS) -c $<

#=================================================================================
M_time_oop.o: M_time.o M_time_duplicate.o
M_time.o: M_time_duplicate.o 
#=================================================================================
